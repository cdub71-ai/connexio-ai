"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const path_1 = require("path");
const LHConfig_1 = require("../LHConfig");
/**
 * Returns partial object with restricted key/value for valid config properties
 * @param path - absolute path to config file
 * @returns Partial<Config>
 */
const getPropertiesFile = (path) => {
    const fullpath = (0, path_1.resolve)(path);
    const file = (0, fs_1.readFileSync)(fullpath).toString();
    return file
        .split('\n')
        .filter(Boolean)
        .reduce((config, line) => {
        const match = /^([^#=]+)(={0,1})(.*)$/.exec(line);
        if (match) {
            const property = match[1].trim();
            const value = match[3].trim();
            if (LHConfig_1.CONFIG_NAMES.includes(property) && !!value) {
                config[property] = value;
            }
        }
        return config;
    }, {});
};
exports.default = getPropertiesFile;
//# sourceMappingURL=getPropertiesFile.js.map